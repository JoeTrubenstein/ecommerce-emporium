<!DOCTYPE html>
<html lang="en">
  <% include ./partials/head %>
  <body>
    <div
      class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm"
    >
      <h5 class="my-0 mr-md-auto font-weight-normal">
        <a href="/">Joe's API</a>
      </h5>

      <nav class="my-2 my-md-0 mr-md-3">
        <a class="p-2 text-dark" href="/api/admin/categories">Categories</a>
        <% if(!user){ %>
        <a class="p-2 text-dark" href="/api/users/signup"
          >Sign up <span class="sr-only">(current)</span></a
        >

        <a class="p-2 text-dark" href="/api/users/signup">Sign in</a>
        <% } else { %>
        <a class="p-2 text-dark" href="/api/users/edit-profile"
          >loggedIn as <%= user.profile.name %></a
        >
        <a class="p-2 text-dark" href="/api/users/logout">Logout</a>

        <% } %>
      </nav>
    </div>
    <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
      <h1 class="display-4">
        Joe's Express API
      </h1>
      <p class="lead">
        Node / Express / Mongoose
      </p>
      
     

  <!-- Modal -->


  <!-- /////////////// -->

  
    </div>

    <div class="container">
      <div class="card-deck mb-3 text-center">

        <script src="https://js.stripe.com/v3"></script>

        <!-- Create a button that your customers click to complete their purchase. Customize the styling to suit your branding. -->
        <button
          style=" margin: auto; background-color:#6772E5;color:#FFF;padding:8px 12px;border:0;border-radius:4px;font-size:1em"
          id="checkout-button-sku_EvyP1gx61VfRtu"
          role="link"
        >
          Checkout
        </button>

        <div id="error-message"></div>

        <script>
          var stripe = Stripe("pk_test_03F7e80rOI6gnP0tS7zk9TTh00izWUD6Ls");

          var checkoutButton = document.getElementById(
            "checkout-button-sku_EvyP1gx61VfRtu"
          );
          checkoutButton.addEventListener("click", function() {
            // When the customer clicks on the button, redirect
            // them to Checkout.
            stripe
              .redirectToCheckout({
                items: [{ sku: "sku_EvyP1gx61VfRtu", quantity: 1 }],

                // Note that it is not guaranteed your customers will be redirected to this
                // URL *100%* of the time, it's possible that they could e.g. close the
                // tab between form submission and the redirect.
                successUrl: "https://your-website.com/success",
                cancelUrl: "https://your-website.com/canceled"
              })
              .then(function(result) {
                if (result.error) {
                  // If `redirectToCheckout` fails due to a browser or network
                  // error, display the localized error message to your customer.
                  var displayError = document.getElementById("error-message");
                  displayError.textContent = result.error.message;
                }
              });
          });
        </script>
      </div>
      <% include ./partials/footer %>
    </div>
  </body>
</html>
